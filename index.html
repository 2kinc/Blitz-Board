<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono" rel="stylesheet">
    <link
        href="https://fonts.googleapis.com/css?family=Material+Icons|Material+Icons+Outlined|Material+Icons+Two+Tone|Material+Icons+Round|Material+Icons+Sharp"
        rel="stylesheet">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Product+Sans">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Roboto">
    <link rel="stylesheet" href="https://use.typekit.net/lku7gbz.css">
    <link rel="stylesheet" href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css">
    <link rel="stylesheet" href="https://2kinc.me/2kcomponents.css">
    <link rel="stylesheet" href="style.css">
    <title>BlitzBoard</title>
</head>

<body>
    <div id="app">
        <aside id="drawer" class="mdc-drawer mdc-drawer--modal">
            <div class="mdc-drawer__header">
                <h3 class="mdc-drawer__title" id="drawer-title"></h3>
            </div>
            <div class="mdc-drawer__content">
                <nav class="mdc-list">
                    <h6 class="mdc-list-group__subheader">Topics</h6>
                    <div id="more-topics">

                    </div>
                </nav>
            </div>
        </aside>

        <div class="mdc-drawer-scrim"></div>
        <div id="mdc-drawer-frame-content">
            <header class="mdc-top-app-bar" id="navbar">
                <div class="mdc-top-app-bar__row">
                    <section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start">
                        <button
                            class="material-icons-outlined mdc-top-app-bar__navigation-icon mdc-ripple-surface">menu</button>
                        <span class="mdc-top-app-bar__title" style="font-family: 'Product Sans', 'Roboto', sans-serif;">
                            Blitzboard <span id="blitzboard-title"></span>
                        </span>
                    </section>
                </div>
            </header>
            <div id="content-body" class="mdc-drawer-app-content">
                <div id="main-content">
                    <div id="posts">
                        <div id="new-post-wrapper">
                            <div id="new-post-main">
                                <div class="mdc-text-field mdc-text-field--outlined">
                                    <input class="mdc-text-field__input" id="new-post-name">
                                    <div class="mdc-notched-outline">
                                        <div class="mdc-notched-outline__leading"></div>
                                        <div class="mdc-notched-outline__notch">
                                            <label class="mdc-floating-label">Title</label>
                                        </div>
                                        <div class="mdc-notched-outline__trailing"></div>
                                    </div>
                                </div>
                                <br>
                                <div class="mdc-text-field mdc-text-field--textarea">
                                    <textarea id="new-post-content" class="mdc-text-field__input" rows="8"
                                        cols="40"></textarea>
                                    <div class="mdc-notched-outline">
                                        <div class="mdc-notched-outline__leading"></div>
                                        <div class="mdc-notched-outline__notch">
                                            <label for="new-post-content" class="mdc-floating-label">Content</label>
                                        </div>
                                        <div class="mdc-notched-outline__trailing"></div>
                                    </div>
                                </div>
                                <br>
                                <input type="file" name="Upload an image" class="inputfile" id="new-post-upload"
                                    accept=".jpg,.png,.bmp" />
                                <label for="new-post-upload" class="mdc-chip" id="new-post-upload-label">
                                    <i
                                        class="material-icons-outlined mdc-chip__icon mdc-chip__icon--leading">cloud_upload</i>
                                    <div class="mdc-chip__text">Upload an image?</div>
                                </label>
                                <br>
                                <div id="new-post-topics-wrapper" class="mdc-chip-set">Topics: </div>
                                <div class="mdc-select">
                                    <i class="mdc-select__dropdown-icon"></i>
                                    <select class="mdc-select__native-control" id="new-post-topics">
                                        <option disabled selected>Select a topic</option>
                                    </select>
                                    <label class="mdc-floating-label">Add topics</label>
                                    <div class="mdc-line-ripple"></div>
                                </div>
                            </div>
                            <button class="mdc-button mdc-button--outlined" id="new-post-button">+ New Post</button>
                        </div>
                        <div id="posts-bodies"></div>
                    </div>
                    <div id="chat">
                        <div id="chat-bodies"></div>
                        <div id="chat-input-container" class="mdc-elevation--z2">
                            <div class="mdc-text-field mdc-text-field--outlined mdc-text-field--with-trailing-icon"
                                style="width: calc(100% - 18px);">
                                <i class="material-icons mdc-text-field__icon mdc-ripple-surface mdc-ripple-surface--primary mdc-ripple-surface--unbounded"
                                    id="chat-input-button" tabindex="0" role="button">message</i>
                                <input class="mdc-text-field__input" id="chat-input">
                                <div class="mdc-notched-outline">
                                    <div class="mdc-notched-outline__leading"></div>
                                    <div class="mdc-notched-outline__notch">
                                        <label class="mdc-floating-label">Send a message</label>
                                    </div>
                                    <div class="mdc-notched-outline__trailing"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="loading">Loading...</div>
            </div>
        </div>
    </div>


    <template id="chat-body-template">
        <div class="chat-body" v-bind:id="'chat-body-' + topic">
            <message-wrapper v-for="message of messages" v-bind:message="message" v-bind:key="message.key">
            </message-wrapper>
        </div>
    </template>

    <template id="message-wrapper-template">
        <div class="message">
            <div style="--color-secondary: black; color: black;">
                <img v-bind:src="message.photoURL" class="profile-picture mdc-elevation--z1"
                    v-bind:alt="message.displayName" v-bind:title="message.displayName">
                <div class="message-body mdc-ripple-surface" ref="messageBody">{{message.message}}</div>
            </div>
            <div class="message-info">
                <span class="chat-username">{{message.displayName}}</span>
                <span class="message-info--time"> at {{message.time}}</span>
            </div>
        </div>
    </template>

    <template id="posts-body-template">
        <div class="posts-body mdc-layout-grid" v-bind:id="'posts-body-' + topic">
            <div class="mdc-layout-grid__inner">
                <post-wrapper v-for="post of posts" v-bind:post="post" v-bind:dbref="dbref.ref.child(post.id)"
                    v-bind:key="post.key"></post-wrapper>
            </div>
        </div>
    </template>

    <template id="post-wrapper-template">
        <div class="mdc-card post-wrapper mdc-layout-grid__cell">
            <div class="mdc-card__primary-action" tabindex="0">
                <div class="mdc-card__media mdc-card__media--16-9 post-img"
                    v-bind:style="'background-image: url(&quot;' + post.imageURL + '&quot;);'">
                </div>
                <div class="mdc-card__primary">
                    <h2 class="mdc-card__title mdc-typography mdc-typography--headline6 post-title">
                        {{post.name}}
                    </h2>
                    <h3 class="mdc-card__subtitle mdc-typography mdc-typography--subtitle2 post-user">
                        {{post.displayName}}
                    </h3>
                </div>
                <div class="mdc-card__secondary mdc-typography mdc-typography--body2">
                    {{post.content}}
                </div>
            </div>
            <div class="mdc-card__actions">
                <div class="mdc-card__action-buttons">
                    <div v-for="topic of post.topics" class="mdc-chip post-topic-item">
                        <div class="mdc-chip__text">{{topic}}</div>
                    </div>
                    <button class="plus-button mdc-button mdc-button--outlined" v-on:click="addPlus()"
                        ref="plusButton">+1</button>
                    <span class="post-points">{{post.pluses + post.minuses}}</span>
                    <button class="minus-button mdc-button mdc-button--outlined" v-on:click="addMinus()"
                        ref="minusButton">-1</button>
                </div>
                <div class="mdc-card__action-icons">
                    <button class="mdc-icon-button material-icons mdc-card__action mdc-card__action--icon--unbounded"
                        title="More options" data-mdc-ripple-is-unbounded="true">more_vert</button>
                </div>
            </div>
        </div>
        <!--<div class="post-wrapper mdc-layout-grid__cell mdc-card">
            <div>
                <span class="post-top">
                    <span class="post-title">{{post.name}}</span>
                    <span class="post-user">{{post.displayName}}</span>
                </span>
            </div>
            <div class="post-content">
                <span class="post-content-span">{{post.content}}</span>
            </div>
            <div class="post-bottom mdc-card__actions">
                <div v-for="topic of post.topics" class="mdc-chip post-topic-item">
                    <div class="mdc-chip__text">{{topic}}</div>
                </div>
                <br>
                <button class="plus-button mdc-button mdc-button--outlined" v-on:click="addPlus()"
                    ref="plusButton">+1</button>
                <span class="post-points">{{post.pluses + post.minuses}}</span>
                <button class="minus-button mdc-button mdc-button--outlined" v-on:click="addMinus()"
                    ref="minusButton">-1</button>
            </div>
        </div>-->
    </template>

    <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase.js"></script>
    <script> //Firebase Initializing
        var config = {
            apiKey: "AIzaSyADD6YWKrzibRMwJNi1FwUR0jcR0GitZPI",
            authDomain: "k-inc-232222.firebaseapp.com",
            databaseURL: "https://k-inc-232222.firebaseio.com",
            projectId: "k-inc-232222",
            storageBucket: "k-inc-232222.appspot.com",
            messagingSenderId: "827804821456"
        };
        firebase.initializeApp(config);
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- Required MDC Web JavaScript library -->
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
    <script src="notifications.js"></script>
    <script src="index.js"></script>
</body>

</html>